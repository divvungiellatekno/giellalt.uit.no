<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN"
"http://forrest.apache.org/dtd/document-v20.dtd">
<document xml:lang="en"> 
    <header> 
        <title>Setup of svnserve on gtsvn</title>
        
        <authors>
            <person name="BÃ¸rre Gaup" email="borre.gaup@samediggi.no" />
        </authors>
        
    </header> 
    <body>
        <section>
            <title>Configuration of svnserve</title>
			<p>
				The svnserve daemon serves the restricted part of our corpus.
				That repository is located in <code>/var/repositories/boundcorpus</code>.
				The repository should be accesible only from gtsvn, so the
				setup of the svnserve daemon and the firewall reflects that
				decision.
			</p>

			<section>
				<title>Configuring automatic start up</title>
				<p>
					To make svnserve start up automatically at boot time, the
					<code>/etc/init.d/svnserve</code> script was added. The
					script was fetched from
					<a href="http://www.mygeekproject.com/?p=152">CentOS 5.2 SVN Server</a>.
					The variable named arthur was changed to
					<code> --listen-host localhost -r /var/repositories</code>.
					This means that svnserve only listens to requests from
					gtsvn itself, and serves the repositories found in
					the directory <code>/var/repositories</code>.
				</p>
			</section>

			<section>
				<title>Configuring the firewall</title>
				<p>
					The line <code>-A INPUT -m state --state NEW -p tcp --dport 3690 -s localhost -j ACCEPT</code>
					was added to the file <code>/etc/sysconfig/iptables</code>.
					The iptables service was restarted by running the command
					<code>sudo /etc/init.d/iptables restart</code> to pick up
					the changes in the setup.
				</p>
			</section>

			<section>
				<title>Setting up restrictions</title>
				<p>
					In the <code>[general]</code> section of
					<code>/var/repositories/boundcorpus/conf/svnserve.conf</code>
					the following variables have been set:
				</p>
				<dl>
					<dt>anon-access = none</dt>
					<dd>This means that nobody but the users defined in the
					user and password file <code>/var/repositories/boundcorpus/conf/passwd</code>
					have access to this repository.</dd>
					<dt>auth-access = write</dt>
					<dd>This means that users defined in the user and password
					file by default have write access to the repository.</dd>
					<dt>password-db = passwd</dt>
					<dd>The file <code>passwd</code> in
					<code>/var/repositories/boundcorpus/conf</code> contains
					users and their passwords</dd>
					<dt>authz-db = authz</dt>
					<dd>This file sets up path based restrictions, which means
					that some users are allowed to read and write to this
					repository, others have only read access.</dd>
				</dl>
			</section>
        </section>
    </body>
</document>