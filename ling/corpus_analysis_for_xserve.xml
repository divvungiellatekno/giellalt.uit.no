<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN"
"http://forrest.apache.org/dtd/document-v20.dtd">
<document xml:lang="en">
    <header>
        <title>The pipeline for the xserve corpus analysis</title>
    </header>

    <body>
        <section>
            <title>Analysis</title>

            <p>The analysis is done on the <code>boerre</code> account on <code>stallo</code>.</p>

            <ol>
                <li>Repositories are updated and converted files are fetched from the xserve to stallo. Details are found in <a href="https://gtsvn.uit.no/langtech/trunk/tools/stallo-analysis/pre_analysis.sh">$GTHOME/tools/stallo-analysis/pre_analysis.sh</a></li>
                <li>Analysis is done on stallo. Details are found in <a href="https://gtsvn.uit.no/langtech/trunk/tools/stallo-analysis/analyse.sh">$GTHOME/tools/stallo-analysis/analyse.sh</a></li>
                <li>Analysed files are synced to the xserve. Details are found in <a href="https://gtsvn.uit.no/langtech/trunk/tools/stallo-analysis/sync_analysed.sh">$GTHOME/tools/stallo-analysis/sync_analysed.sh</a></li>
            </ol>

            <p>The two first parts are done by this cron job:
                <code>43 01 * * * . $HOME/.bash_profile &amp;&amp; $GTHOME/tools/stallo-analysis/pre_analysis.sh &amp;&amp; qsub -o $HOME/analysis.log -j oe $GTHOME/tools/stallo-analysis/analyse.sh</code>
            </p>
            <p>The third part is done by this cron job:
                <code>00 09 * * * source $HOME/.bash_profile &amp;&amp; $GTHOME/tools/stallo-analysis/sync_analysed.sh</code>
            </p>
        </section>
        <section>
            <title>Files and compilers</title>

            <p>The xfst, hfst, vislcg3 and CorpusTools tools are installed in <code>~boerre/bin</code></p>

            <ul>
                <li>The langtech repo: <code>~boerre/svnrepos/main/</code></li>
                <li>The freecorpus repo: <code>~/boerre/svnrepos/freecorpus/</code></li>
                <li>The boundcorpus repo: <code>~/boerre/svnrepos/boundcorpus/</code></li>
            </ul>

            <p>The "xfst" mode found in <a href="https://gtsvn.uit.no/langtech/trunk/tools/CorpusTools/corpustools/xml/modes.xml">$GTHOME/tools/CorpusTools/corpustools/xml/modes.xml</a> is the pipeline for analysing files.</p>

            <section>
                <title>hfst: Build commands</title>
                <source>cd ~/hfst/
git pull
module load autoconf/2.69
module load automake/1.13.1
module load gcc/4.9.1
./autogen.sh
./configure --enable-all-tools --with-unicode-handler=glib --prefix=/home/boerre --with-readline
make
make install</source>
            </section>

            <section>
                <title>vislcg3: Build commands</title>
                <source>module load cmake/3.1.1
module load gcc/4.9.1
module load boost/1.57.0
cd ~/svnrepos/vislcg3/
svn up
./cmake.sh --prefix=~
make
make install</source>
            </section>

            <section>
                <title>CorpusTools: Install commands</title>
                <source>cd ~/svnrepos/main/tools/CorpusTools/
svn up
python setup.py install --user --install-scripts=$HOME/bin</source>
            </section>
        </section>
    </body>
</document>
