<?xml version = '1.0' encoding = 'UTF-8'?>
<!DOCTYPE document PUBLIC "-//APACHE//DTD Documentation V2.0//EN"
                          "http://forrest.apache.org/dtd/document-v20.dtd">
<document xml:lang="en"> 
    <header> 
        <title>Aspell Documentation</title>

	<authors>
	  <person email="sjur.moshagen@samediggi.no" name="Sjur N. Moshagen" />
	  <person email="tomi.pieski@samediggi.no" name="Tomi Pieski" />
	  <person email="trond.trosterud@hum.uit.no" name="Trond Trosterud" />
	</authors>

    </header> 
    <body> 
	  
	  <p>This is a document for the technical documentation
	     of our spellers based on open source, by example from Debian this
	     presently includes Aspell, iSpell and MySpell.
	     </p>
	     
	     <p>It is hastily written, and will be split up in sensible subdocuments
	        as soon as we have time to do so. Just now it is here as a survival
	        kit for aspell newcomers.</p>
	     

      <section>
        <title>File Overview</title>
	     
	     <p>The files are in the gt/sme/aspell directory. Cf. the list with
	        explanation:</p>
	     
	     <dl>
	     <dt>Makefile.pre</dt>
	     <dd>This file is used when generating Makefile in distribution
	         package</dd>

        <dt>configure</dt>
        <dd>Used for generating the Makefile in distribution package</dd>
        
        <dt>info</dt>
        <dd>The info file is the main file which contains most of the information.</dd>
                
        <dt>sme.cmap</dt>
        <dd>File contains the mappings of the characters into aspell internal
            format used in our wordlist.</dd>
        
        <dt>sme.cset </dt>
        <dd>File contains the characterset of the characters used in aspell
            internal format.</dd>
        
        <dt>sme.cwl  </dt>
        <dd>This is compressed form of the wordlist.</dd>
        
        <dt>sme.dat  </dt>
        <dd>Data file of the language.</dd>
        
        <dt>sme.multi</dt>
        <dd>Listing of the dictionary files</dd>
        
        <dt>sme.wl   </dt>
        <dd>Wordlist</dd>
        
        <dt>sme_affix.dat</dt>
        <dd>Contains the affixes of the language.</dd>
        
        <dt>sme_phonet.dat ???</dt>
        <dd>It is possible to define some substitution sequences as more likely
            than others.
        </dd>

       </dl>
      </section>
	     
      <section>
        <title>The format of the files</title>

        <section>
          <title>The way it works</title>

          <p>The fullform wordlist <code>sme.wl</code> is created from transducer
             with Xerox finite-state tools.</p>

        </section>

        <section>
          <title>The Makefile</title>
          <p>Here we need some words on what it does and especially what it doesn't.</p>

          <p>We postpone the makefile documentation (how it does it).</p>
        </section>


        <section>
          <title>sme_affix</title>

          <p>This file is a manually created affix file for North Sami.</p>

          <section>
            <title>The format of the affix file</title>

            <p>Affix is either a prefix or a suffix that can be attached to root words
               to make other words. Here is an example of how to define a suffix.</p>

<source>
SFX I Y 5
SFX I   a                   ii                      [^ij]a
SFX I   0                   i                       [ij]a
SFX I   e                   ii                      e
SFX I   0                   i                       [iá]
SFX I   i                   ái                      i
</source>

            <p>The first line has 4 fields.</p>

            <ol>
              <li>SFX         indicates this is a suffix</li>
              <li>I           is the name of the character which represents this suffix</li>
              <li>Y           indicates it can be combined with other affix entries</li>
              <li>5           indicates it has 5 entries stored in this prefix</li>
            </ol>

            <p>The remaining lines describe the information for the 5 entries.</p>

            <ol>
              <li>SFX         indicates this is a suffix</li>
              <li>I           is the name of the character which represents this suffix</li>
              <li>a           the string of chars to strip off before adding affix</li>
              <li>ii          the prefix string to add (a 0 indicates the NULL string)</li>
              <li>[^ij]a      the conditions which must be met before prefix can be added</li>
            </ol>
          </section>

          <section>
            <title>Suffix lexica</title>
            <p>The suffix lexica are</p>

            <dl>
              <dt>PFX A</dt><dd>North-, South-, prefixes to proper nouns</dd>  
              <dt>PFX B</dt><dd>ii-, the negative prefix</dd>  
              <dt>SFX E</dt><dd>the suffixes for the Prop lexica ACCRA (V-final) and LONDON
                       (odd-syll C-final)</dd> 
              <dt>SFX F</dt><dd>suffixes for the Prop lexica NYSTØ (heavy vow), C-FI-NEN
                       and CNAME (C-final)</dd>  
              <dt>SFX G</dt><dd>suffixes for the Prop lexicon BERN (even-syll C-final)</dd>
              <dt>SFX H</dt><dd>suffixes for GOAHTI etc, even-syll nouns</dd> 
              <dt>SFX I</dt><dd>suffixes for STAHTA, IIJA, even-syll nouns without illative
                       vow alt</dd>  
              <dt>SFX J</dt><dd>suffixes for SEAMU </dd>  
              <dt>SFX K</dt><dd>suffixes for MALIS, BU/MUS</dd>  
              <dt>SFX L</dt><dd>suffixes for DIMINC</dd>  
              <dt>SFX N</dt><dd>suffixes for verbs.</dd>  
            </dl>

            <p>At present, the status is</p>

<source>
PFX A Y 9
PFX B Y 1
SFX E Y 31
SFX F Y 69
SFX G Y 18
SFX H Y 156
SFX I Y 121
SFX J Y 214
SFX K Y 70
SFX N Y 149
</source>

          </section>

          <p>Status quo:</p>

          <dl>
            <dt>Implemented</dt>
            <dd>Proper nouns, nouns, even-syllabic verbs, contracted verbs (??)</dd>
            <dt>Missing</dt>
            <dd> Adjectives are missing completely. Three-syllabic
                nouns and three-syllabic verbs are missing.</dd>
          </dl>

          <p>Methods for adding them (how the suffixes have been added so far).</p>

          <p>A nice strategy would be to generate suffixes automatically, like the
             way it was done for the Finnish ispell file. Let us look into that
             possibility. While waiting, let us consider adding the following chunk
             to sme_affix.dat.</p>

<source>
SFX M   0            
SFX M   it            a                 it
SFX M   it            an                it
SFX M   it            at                it
SFX M   0            e                  t
SFX M   0            eaba               t
SFX M   0            eaddji             t
SFX M   0            eadnot             t
SFX M   0            eadnu              t
SFX M   0            eahkket            t
SFX M   0            eahkki             t
SFX M   0            eahkkot            t
SFX M   0            eahkku             t
SFX M   0            eahppi             t
SFX M   0            eačča              t
SFX M   0            eaččan             t
SFX M   0            eaččat             t
SFX M   0            eaš                t
SFX M   0            eažžaba            t
SFX M   0            eažžabeahtti       t
SFX M   0            eažžabehtet        t
SFX M   0            eažžat             t
SFX M   0            eažžá              t
SFX M   0            edje               t
SFX M   0            edne               t
SFX M   0            ehket              t
SFX M   0            ehkon              t
SFX M   0            ehkos              t
SFX M   0            ehkoset            t
SFX M   0            ehkoska            t
SFX M   0            ehkot              t
SFX M   0            ehpet              t
SFX M   0            eidde              t
SFX M   0            eiddet             t
SFX M   0            eigga              t
SFX M   0            eimme              t
SFX M   0            eimmet             t
SFX M   0            etne               t
SFX M   0            etnot              t
SFX M   0            ettiin             t
SFX M   0            eš                 t
SFX M   0            ežže               t
SFX M   0            ežžet              t
SFX M   0            haga               t
SFX M   0            ii                 t
SFX M   0            in                 t
SFX M   0            it                 t
SFX M   0            ivčče              t
SFX M   0            ivččen             t
SFX M   0            ivččet             t
SFX M   0            ivččii             t
SFX M   0            ivččiide           t
SFX M   0            ivččiidet          t
SFX M   0            ivččiiga           t
SFX M   0            ivččiime           t
SFX M   0            ivččiimet          t
SFX M   0            keahttá            t
</source>

          <p>Initially, we inserted flags in the fsm's source code. Now, the tags
             <code>A, B, C, etc.</code> are generated via aspell's <code>munch</code>
             command, intended-to-be made  part of the Makefile routine.</p>

        </section>

        <section>
          <title>The wordlist sme.wl</title>

          <p>The list sme.wl contains 1000 lines (why?). For the words
             <em>A-vitamiidna</em> and some other vitamins, it has full paradigms,
             whereas for place names it has only stems. Why?</p>

          <p>Because sme.wl is only a dummy file?</p>

          <p>Because the proper nouns have been enrolled in the sme_suffix.dat file,
             and therefore are represented only by their stems, whereas the vitamins
             are unenrolled, and therefore represented by fullforms?</p>

          <section>
            <title>Adding flags to wordlist</title>

            <p>Flags are inserted to the wordlist with <code>munch-list</code> aspell
               command. Munch-list takes the wordlist <code>sme.wl</code> and affix
               information file <code>sme_affix.dat</code> and generates a munched
               wordlist with wordroots that have appropriate affix tags.</p>

            <p>The munching must be done in small bits, because it consumes RAM very
                much. The plan is to use 1 million words at a time, and catenate the
                output into one uniform wordlist.</p>

            <p>After the wordlist has been munched, it can be compressed and the output
               is a compressed wordlist <code>sme.cwl</code>.</p>
          </section>
        </section>

        <section>
          <title>The file sme_phonet.dat</title>

          <p>In aspell common misspellings are given more weight than other
             substitutions. This can be a part of sma_affix.dat file (it will
             then be MySpell compatible), but in aspell it is done as a separate
             file <code>sme_phonet.dat</code></p>

          <p>Format: The list is a tab-separated file, wshere each line has the
             form <code>sourceletter(s) whitespace(s) targetletter(s)</code>. We
             would like to add the following type of substitutions:</p>

          <ul>
            <li>Long á vs. short á</li>
            <li>The Sámi letters vs. the nonmodified Latin letters</li>
            <li>t versus its non-reduced consonants</li>
            <li>consonant gradation pairs</li>
            <li>Probably something around loan words: </li>
          </ul>


<source>
        a   á
        á   a
        c   č
        tt  t
        tt  dd
        ...
</source>

        </section>

      </section>

	<p class="last_modified">Last modified: $Date: 2008-11-05 19:52:54 +0200 (ons, 05 nov 2008) $,
	   by $Author: boerre $</p>

    </body>
</document>
